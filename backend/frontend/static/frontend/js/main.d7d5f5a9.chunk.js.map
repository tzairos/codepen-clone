{"version":3,"sources":["Editor.js","App.js","index.js"],"names":["Editor","props","useState","collapsed","setCollapsed","language","displayName","value","onChange","className","style","minWidth","type","onClick","icon","faAngleDoubleRight","faAngleDoubleLeft","onBeforeChange","editor","data","options","lineWrapping","lint","mode","theme","lineNumbers","App","open","setOpen","htmlCode","setHtmlCode","jsCode","setJsCode","cssCode","setCssCode","srcDoc","setSrcDoc","exerciseList","setExerciseList","consoleLog","setConsoleLog","preVal","useRef","useEffect","window","addEventListener","event","messageListener","removeEventListener","origin","message","current","useEventListener","a","axios","result","console","log","timeoutToChange","setTimeout","clearTimeout","title","sandbox","frameBorder","width","height","id","toString","map","exercise","js_text","html_text","css_text","setExerciseContent","name","pk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d7d5f5a9.chunk.js","sourcesContent":["\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/material.css\";\nimport \"codemirror/mode/xml/xml\";\nimport \"codemirror/mode/javascript/javascript\";\nimport \"codemirror/mode/css/css\";\n//import \"codemirror/addon/lint/html-lint\";\n// import \"codemirror/addon/lint/css-lint\";\n// import \"codemirror/addon/lint/javascript-lint\";\n//import \"codemirror/addon/lint/lint\"\n//<i class=\"fas fa-angle-double-right\"></i>\nimport { useState } from \"react\";\nimport { Controlled as ControlledEditor } from \"react-codemirror2\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDoubleRight,faAngleDoubleLeft } from '@fortawesome/free-solid-svg-icons'\n const Editor=(props)=>{\n     const [collapsed,setCollapsed]=useState(false);\n    const { language, displayName, value, onChange } = props;\n    const handleChange=(editor, data, value)=> {\n        onChange(value);\n      }\n    return(\n       \n        <div className={`flex flex-col h-full  mx-2 ${collapsed? \"flex-0\" : \"flex-1\"}  `} style={{minWidth: '100px'}}>\n          <div className=\"flex flex-row bg-gray-200 border  justify-between items-center   px-2 h-10 w-full\">\n            <p>{displayName}</p>\n            <button type=\"button\" onClick={()=>{setCollapsed(!collapsed)}} className=\"bg-blue-500 rounded text-white\">\n             <span><FontAwesomeIcon icon={collapsed? faAngleDoubleRight:faAngleDoubleLeft} /></span>\n            </button>\n          </div>\n          <ControlledEditor \n          \n            onBeforeChange={handleChange}\n            value={value}\n            className={`code-mirror-wrapper  h-full `}\n            options={{\n              lineWrapping: true,\n              lint: true,\n              mode: language,\n              theme: \"material\",\n              lineNumbers: true,\n              \n            }}\n          />\n        </div>\n    )\n}\n\nexport default Editor;","import \"./App.css\";\nimport Editor from \"./Editor\";\nimport { useState, useEffect, useCallback, useRef, Fragment } from \"react\";\n// const captureConsole = `if (typeof console  != \"undefined\")\n// if (typeof console.log != 'undefined')\n//     console.olog = console.log;\n// else\n//     console.olog = function() {};\n\n// console.log = function(message) {\n\n//     window.parent.postMessage('<p>' + message + '</p>','http://localhost:3000');\n// };\n// console.error = console.debug = console.info =  console.log;\n// `\nimport axios from 'axios';\nconst captureConsole = `\nconst console = {\n    log: function(m){\n        window.parent.postMessage({message: m },'http://localhost:3000'); \n    }       \n};\n`;\n\nconst useEventListener = () => {\n  const [consoleLog, setConsoleLog] = useState();\n  const preVal = useRef();\n  useEffect(() => {\n    window.addEventListener(\"message\", (event) => messageListener(event));\n    return window.removeEventListener(\"message\", messageListener);\n  }, []);\n  const messageListener = (event) => {\n    // IMPORTANT: check the origin of the data!\n    if (event.origin == \"null\") {\n      //   document.getElementById(\"debugDiv\").innerHTML +=\n      //     \"<p>\" + event.data.message ? event.data.message : event.data + \"</p>\";\n      if (preVal != event.data.message) {\n        preVal.current = event.data.message;\n        setConsoleLog(event.data.message);\n      }\n    }\n  };\n  return consoleLog;\n};\n\n// const messageListener= event => {\n//         // IMPORTANT: check the origin of the data!\n//             if(event.origin==\"null\"){\n//                 document.getElementById('debugDiv').innerHTML += ('<p>' + event.data.message ? event.data.message : event.data  + '</p>') ;\n//             }\n\n//     }\nfunction App(props) {\n  //   const testFunction = useCallback( () => {\n  //     if (typeof console != \"undefined\")\n  //       if (typeof console.log != \"undefined\") console.olog = console.log;\n  //       else console.olog = function () {};\n\n  //     console.log = function (message) {\n  //       //console.olog(message);\n  //       document.getElementById(\"debugDiv\").innerHTML += \"<p>\" + message + \"</p>\";\n  //     };\n  //     console.oerror=console.error;\n  //     console.error = console.debug = console.info = console.log;\n\n  //   },[]);\n\n  //   useEffect(()=>{\n  //     testFunction();\n  //   },[testFunction])\n\n  const { language, displayName, value, onChange } = props;\n  const [open, setOpen] = useState(false);\n  const [htmlCode, setHtmlCode] = useState(\"\");\n  const [jsCode, setJsCode] = useState(\"\");\n  const [cssCode, setCssCode] = useState(\"\");\n  const [srcDoc, setSrcDoc] = useState(\"\");\n  const [exerciseList,setExerciseList]=useState();\n\n\nconst setExerciseContent=(exercise)=>{\n    setJsCode(exercise.js_text);\n    setHtmlCode(exercise.html_text);\n    setCssCode(exercise.css_text);\n}\n\n  const consoleLog = useEventListener();\n\n  useEffect(async () => {\n    const result = await axios(\n      'exercise/',\n    );\n \n    result.data ? setExerciseList(result.data) : console.log('no data');\n  },[]);\n\n  useEffect(() => {\n    const timeoutToChange = setTimeout(() => {\n      setSrcDoc(`\n    <html>\n        <head><script>${captureConsole}</script></head>\n      <body>${htmlCode}</body>\n      <style>${cssCode}</style>\n      \n      <script>${`try { ${jsCode} } catch(error){window.parent.postMessage(error,'http://localhost:3000'); }`} </script>\n     \n    </html>`);\n    }, 2000);\n    return () => clearTimeout(timeoutToChange);\n  }, [jsCode, cssCode, htmlCode]);\n\n  return (\n    <Fragment>\n      <div className=\"flex flex-col mx-auto bg-blue-500 py-2 px-4 h-screen w-full \">\n        <div className=\"flex flex-row h-70 flex-1   w-full\">\n          <Editor \n            language=\"javascript\"\n            displayName=\"Javascript\"\n            onChange={setJsCode}\n            value={jsCode}\n          ></Editor>\n          <Editor \n            language=\"xml\"\n            displayName=\"HTML\"\n            onChange={setHtmlCode}\n            value={htmlCode}\n          ></Editor>\n          <Editor \n            language=\"css\"\n            displayName=\"CSS\"\n            onChange={setCssCode}\n            value={cssCode}\n          ></Editor>\n        </div>\n        <div className=\"flex-1 w-full h-100 bg-gray  px-2 my-4\">\n          <iframe\n            className=\"w-full h-full bg-gray-300\"\n            srcDoc={srcDoc}\n            title=\"output\"\n            sandbox=\"allow-scripts allow-modals\"\n            frameBorder=\"0\"\n            width=\"100%\"\n            height=\"100%\"\n          />\n        </div>\n        <div className=\"px-2 my-5 w-full\">\n          <div id=\"debugDiv\" className=\" h-20 bg-white   \">\n            {consoleLog ? consoleLog.toString() : \"\"}\n          </div>\n        </div>\n      </div>\n      <div className={`fixed ${open? 'bottom-0':'-bottom-20'}  w-full h-20 px-6`}>\n        <div className=\"relative \">\n          <div className=\"absolute center bottom-0 right-5 h-10 \">\n              <button className=\"rounded my-0 bg-blue-300 hover:bg-blue-100 hover:text-black text-white w-20 h-10\" onClick={()=> setOpen(open=>setOpen(!open))}>Examples</button>\n          </div>\n        </div>\n        <div className={`w-full h-20 bg-blue-300 my-0 flex ${open? 'visible':'hidden'} justify-center items-center text-xl `}>\n            {\n                exerciseList?.map((exercise)=>{\n                  return  <button key={exercise.pk} onClick={()=>setExerciseContent(exercise)} className=\"rounded my-0 bg-blue-300 text-white hover:bg-blue-100 hover:text-black h-10 mx-4 flex-1\">{exercise.name}</button>\n                })\n            }\n        \n        </div>\n        \n      </div>\n    </Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport './index.css';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}